{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_" 
        },
        "english_stemmer": {
          "type":       "stemmer",
          "language":   "english"
        },
        "english_possessive_stemmer": {
          "type":       "stemmer",
          "language":   "possessive_english"
        }
      },
      "analyzer": {
        "folding_english": {
            "tokenizer":"standard",
            "stop": "_english_",
            "stemmer": "possessive_english",
            "filter": [
            "english_possessive_stemmer",
            "lowercase",
            "english_stop",
            "english_stemmer",
            "asciifolding"
            ]
          }
        }
      }
    },
    
  "mappings" : {
    "properties" : {
      "book_id" : {"type" : "long"},
      "title" : {
        "type" : "text",
        "analyzer": "folding_english"
      },
      "author" : {
        "type": "text",
        "analyzer": "folding_english"
      },
      "genre" : {
        "type": "text",
        "analyzer": "folding_english"
      },
      "description" : {
        "type": "text",
        "analyzer": "folding_english"
      },
      "avg_rating" : {"type" : "float"},
      "reviews" : {
        "type" : "nested",
        "properties": {
          "rating" : {"type" : "integer"},
          "review" : {
            "type" : "text",
            "analyzer": "folding_english"
          }
        }
      }
    }
  }
}
